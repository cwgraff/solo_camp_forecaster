var app=angular.module("campApp",["ngRoute"]);app.config(["$routeProvider","$locationProvider",function(a,b){a.when("/selection",{templateUrl:"views/selection.html",controller:"SelectionController"}).when("/result",{templateUrl:"views/result.html",controller:"ResultController"}),b.html5Mode(!0)}]),app.factory("DataService",function(){var a={startDate:0,endDate:0};return a}),app.controller("mainController",["$scope","$http","DataService",function(a,b,c){a.sample="Angular hooked up correctly",a.selectedList=[],a.dateToday=Date.now()}]),app.controller("SelectionController",["$scope","$http","DataService",function(a,b,c){a.sample="Selection Angular hooked up correctly",a.dateIt=864e5,a.getList=function(){selectedRegion=a.region,b.get("/getData/"+selectedRegion).then(function(b){function c(b){for(var c=0;c<b.length;c++)for(var d=0;d<a.selectedList.length;)b[c].id==a.selectedList[d].id?(b.splice(c,1),d=0):d++;return b}console.log(b.data),a.parkList=c(b.data)})},a.selectLoc=function(b){console.log(b);for(var c=0;c<a.parkList.length;c++)b==a.parkList[c].id&&(console.log(a.parkList[c]),a.selectedList.push(a.parkList.splice(c,1)[0]),console.log(a.parkList))},a.unSelectLoc=function(b){for(var c=0;c<a.selectedList.length;c++)b==a.selectedList[c].id&&(a.selectedList[c].region==selectedRegion||"All"==selectedRegion?a.parkList.push(a.selectedList.splice(c,1)[0]):a.selectedList.splice(c,1))},a.setDateRange=function(){c.startDate=a.dateStart,c.endDate=a.dateEnd}}]),app.controller("ResultController",["$scope","$http","DataService",function(a,b,c){function d(){for(var b=0,c=j.slice(a.startDate,a.endDate+1),d=0;d<c.length;d++)b+=c[d].temperatureMax;return b/c.length}function e(){for(var b=0,c=j.slice(a.startDate,a.endDate+1),d=0;d<c.length;d++)b+=c[d].precipProbability;return b/c.length}function f(){for(var b=[],c=j.slice(a.startDate,a.endDate+1),d=0;d<c.length;d++)b.push(c[d].summary);return b}function g(){for(var b=[],c=j.slice(a.startDate,a.endDate+1),d=0;d<c.length;d++)b.push(c[d].time);return b}function h(){for(var b=[],c=j.slice(a.startDate,a.endDate+1),d=0;d<c.length;d++)b.push(c[d].precipProbability);return b}function i(){for(var b=[],c=j.slice(a.startDate,a.endDate+1),d=0;d<c.length;d++)b.push(c[d].temperatureMax);return b}a.sample="Result Angular hooked up correctly",a.startDate=Number(c.startDate),a.endDate=Number(c.endDate);for(var j,k=[],l=function(c,l){b.jsonp("https://api.forecast.io/forecast/760edd936d31e7c58af4820c05f8a327/"+a.selectedList[c].lat+","+a.selectedList[c]["long"]+"/?exclude=currently,minutely,hourly,alerts,flags&callback=JSON_CALLBACK").then(function(a){j=a.data.daily.data;var b={parkName:l,averageTemp:d(),averagePrecip:e(),summaries:f(),dates:g(),dailyPrecip:h(),dailyTemp:i()};k.push(b),console.log(k)})},m=0;m<a.selectedList.length;m++)l(m,a.selectedList[m].name)}]);